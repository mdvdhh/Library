local EightCI = {}
local Player = game.Players.LocalPlayer
local CoreGui = game:GetService("CoreGui")

function EightCI:CreateWindow(config)
    local Title = config.Title or "EightCI Ui"

    local Gui = Instance.new("ScreenGui")
    Gui.Name = "EightCI_Window"
    Gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    Gui.ResetOnSpawn = false
    Gui.Parent = CoreGui

    local Main = Instance.new("Frame")
    Main.Name = "Main"
    Main.Size = UDim2.new(0, 290, 0, 214)
    Main.Position = UDim2.new(0, 230, 0, 32)
    Main.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Main.BorderSizePixel = 0
    Main.Active = true
    Main.Draggable = true
    Main.Parent = Gui
    Instance.new("UICorner", Main)

    local TitleFrame = Instance.new("Frame")
    TitleFrame.Name = "Title"
    TitleFrame.Size = UDim2.new(0, 228, 0, 24)
    TitleFrame.Position = UDim2.new(0, 16, 0, 6)
    TitleFrame.BackgroundTransparency = 1
    TitleFrame.Parent = Main

    local TitleText = Instance.new("TextLabel")
    TitleText.Text = Title
    TitleText.Size = UDim2.new(0, 228, 0, 24)
    TitleText.BackgroundTransparency = 1
    TitleText.TextColor3 = Color3.fromRGB(255, 255, 255)
    TitleText.TextScaled = true
    TitleText.TextXAlignment = Enum.TextXAlignment.Left
    TitleText.Parent = TitleFrame

    local Close = Instance.new("TextButton")
    Close.Name = "CloseBtn"
    Close.Text = "-"
    Close.Size = UDim2.new(0, 36, 0, 26)
    Close.Position = UDim2.new(0, 248, 0, 4)
    Close.BackgroundTransparency = 1
    Close.TextScaled = true
    Close.TextColor3 = Color3.fromRGB(255, 255, 255)
    Close.Parent = Main

    local Scroll = Instance.new("ScrollingFrame")
    Scroll.Size = UDim2.new(0, 284, 0, 173)
    Scroll.Position = UDim2.new(0, 3, 0, 37)
    Scroll.BackgroundTransparency = 1
    Scroll.ScrollBarThickness = 3
    Scroll.ElasticBehavior = Enum.ElasticBehavior.Never
    Scroll.CanvasSize = UDim2.new(0, 0, 0, 0)
    Scroll.Parent = Main

    local UIList = Instance.new("UIListLayout")
    UIList.Padding = UDim.new(0, 8)
    UIList.Parent = Scroll

    local OpenButton = Instance.new("Frame")
    OpenButton.Name = "OpenButton"
    OpenButton.Size = UDim2.new(0, 162, 0, 44)
    OpenButton.Position = UDim2.new(0, 32, 0, 14)
    OpenButton.BackgroundColor3 = Color3.fromRGB(6, 6, 6)
    OpenButton.Visible = false
    OpenButton.Parent = Gui
    Instance.new("UICorner", OpenButton)

    local OpenText = Instance.new("TextButton")
    OpenText.Name = "TextBtn"
    OpenText.Text = "Open"
    OpenText.Size = UDim2.new(0, 82, 0, 32)
    OpenText.Position = UDim2.new(0, 74, 0, 6)
    OpenText.BackgroundTransparency = 1
    OpenText.TextColor3 = Color3.fromRGB(255, 255, 255)
    OpenText.TextScaled = true
    OpenText.Parent = OpenButton

    local OpenIcon = Instance.new("ImageLabel")
    OpenIcon.Image = "rbxassetid://844956"
    OpenIcon.Size = UDim2.new(0, 31, 0, 31)
    OpenIcon.Position = UDim2.new(0, 40, 0, 7)
    OpenIcon.BackgroundTransparency = 1
    OpenIcon.Parent = OpenButton

    Close.MouseButton1Click:Connect(function()
        Main.Visible = false
        OpenButton.Visible = true
    end)

    OpenText.MouseButton1Click:Connect(function()
        Main.Visible = true
        OpenButton.Visible = false
    end)

    local elements = {}

    function elements:Button(data)
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(0, 252, 0, 36)
        btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        btn.BorderSizePixel = 0
        btn.Text = ""
        btn.Parent = Scroll
        Instance.new("UICorner", btn)

        local icon = Instance.new("ImageLabel")
        icon.Image = data.Icon or "rbxassetid://12804017021"
        icon.Size = UDim2.new(0, 23, 0, 23)
        icon.Position = UDim2.new(0, 216, 0, 7)
        icon.BackgroundTransparency = 1
        icon.Parent = btn

        local title = Instance.new("TextLabel")
        title.Text = data.Title or "Button"
        title.Size = UDim2.new(0, 192, 0, 26)
        title.Position = UDim2.new(0, 10, 0, 5)
        title.BackgroundTransparency = 1
        title.TextColor3 = Color3.fromRGB(255, 255, 255)
        title.TextScaled = true
        title.TextXAlignment = Enum.TextXAlignment.Left
        title.Parent = btn

        btn.MouseButton1Click:Connect(function()
            if data.Callback then
                data.Callback()
            end
        end)

        Scroll.CanvasSize = UDim2.new(0, 0, 0, UIList.AbsoluteContentSize.Y)
    end

    function elements:Toggle(data)
        local toggle = Instance.new("TextButton")
        toggle.Size = UDim2.new(0, 252, 0, 36)
        toggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        toggle.BorderSizePixel = 0
        toggle.Text = ""
        toggle.Parent = Scroll
        Instance.new("UICorner", toggle)

        local box = Instance.new("Frame")
        box.Size = UDim2.new(0, 26, 0, 26)
        box.Position = UDim2.new(0, 215, 0, 5)
        box.BackgroundColor3 = Color3.fromRGB(114, 114, 114)
        box.BorderSizePixel = 0
        box.Parent = toggle
        local c = Instance.new("UICorner")
        c.CornerRadius = UDim.new(0, 4)
        c.Parent = box

        local title = Instance.new("TextLabel")
        title.Text = data.Title or "Toggle"
        title.Size = UDim2.new(0, 192, 0, 26)
        title.Position = UDim2.new(0, 10, 0, 5)
        title.BackgroundTransparency = 1
        title.TextColor3 = Color3.fromRGB(255, 255, 255)
        title.TextScaled = true
        title.TextXAlignment = Enum.TextXAlignment.Left
        title.Parent = toggle

        local state = data.Default or false
        box.BackgroundColor3 = state and Color3.fromRGB(0, 255, 100) or Color3.fromRGB(114, 114, 114)

        toggle.MouseButton1Click:Connect(function()
            state = not state
            box.BackgroundColor3 = state and Color3.fromRGB(0, 255, 100) or Color3.fromRGB(114, 114, 114)
            if data.Callback then
                data.Callback(state)
            end
        end)

        Scroll.CanvasSize = UDim2.new(0, 0, 0, UIList.AbsoluteContentSize.Y)
    end

    function elements:TextBox(data)
        local frame = Instance.new("Frame")
        frame.Size = UDim2.new(0, 252, 0, 36)
        frame.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        frame.BorderSizePixel = 0
        frame.Parent = Scroll
        Instance.new("UICorner", frame)

        local title = Instance.new("TextLabel")
        title.Text = data.Title or "TextBox"
        title.Size = UDim2.new(0, 138, 0, 26)
        title.Position = UDim2.new(0, 10, 0, 5)
        title.BackgroundTransparency = 1
        title.TextColor3 = Color3.fromRGB(255, 255, 255)
        title.TextScaled = true
        title.TextXAlignment = Enum.TextXAlignment.Left
        title.Parent = frame

        local box = Instance.new("TextBox")
        box.Size = UDim2.new(0, 88, 0, 28)
        box.Position = UDim2.new(0, 156, 0, 4)
        box.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        box.TextColor3 = Color3.fromRGB(242, 242, 242)
        box.TextScaled = true
        box.PlaceholderText = data.Placeholder or "Enter Text..."
        box.Text = ""
        box.ClearTextOnFocus = false
        box.Parent = frame
        local cc = Instance.new("UICorner")
        cc.CornerRadius = UDim.new(0, 4)
        cc.Parent = box

        box.FocusLost:Connect(function(enter)
            if enter and data.Callback then
                data.Callback(box.Text)
            end
        end)

        Scroll.CanvasSize = UDim2.new(0, 0, 0, UIList.AbsoluteContentSize.Y)
    end

    return elements
end

return EightCI