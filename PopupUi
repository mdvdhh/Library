local Popup = {}
Popup.__index = Popup

local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "PopupUI"
ScreenGui.Parent = PlayerGui
ScreenGui.ResetOnSpawn = false

function Popup:Show(config)
    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(0.35, 0, 0.25, 0) -- 35% width, 25% height
    Frame.Position = UDim2.new(0.5, 0, 0.5, 0)
    Frame.AnchorPoint = Vector2.new(0.5, 0.5)
    Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Frame.BackgroundTransparency = 0.05
    Frame.ClipsDescendants = true
    Frame.Parent = ScreenGui

    local UIScale = Instance.new("UIScale", Frame)
    UIScale.Scale = 1 -- có thể thay đổi nếu muốn zoom toàn bộ popup

    local UICorner = Instance.new("UICorner", Frame)
    UICorner.CornerRadius = UDim.new(0, 12)

    local Icon = Instance.new("ImageLabel")
    Icon.Size = UDim2.new(0.18, 0, 0.4, 0) -- 18% width, 40% height
    Icon.Position = UDim2.new(0.05, 0, 0.05, 0)
    Icon.Image = config.Icon or ""
    Icon.BackgroundTransparency = 1
    Icon.Parent = Frame

    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(0.7, 0, 0.4, 0)
    Title.Position = UDim2.new(0.27, 0, 0.05, 0)
    Title.Text = config.Title or "Popup"
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.BackgroundTransparency = 1
    Title.Font = Enum.Font.SourceSansBold
    Title.TextSize = 22
    Title.TextWrapped = true
    Title.TextScaled = true
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.Parent = Frame

    local Button1 = Instance.new("TextButton")
    Button1.Size = UDim2.new(0.4, 0, 0.25, 0)
    Button1.Position = UDim2.new(0.05, 0, 0.65, 0)
    Button1.Text = config.Button1 or "Yes"
    Button1.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    Button1.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button1.Font = Enum.Font.SourceSansBold
    Button1.TextSize = 20
    Button1.AutoButtonColor = true
    Button1.Parent = Frame
    local UICorner1 = Instance.new("UICorner", Button1)

    local Button2 = Instance.new("TextButton")
    Button2.Size = UDim2.new(0.4, 0, 0.25, 0)
    Button2.Position = UDim2.new(0.55, 0, 0.65, 0)
    Button2.Text = config.Button2 or "No"
    Button2.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    Button2.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button2.Font = Enum.Font.SourceSansBold
    Button2.TextSize = 20
    Button2.AutoButtonColor = true
    Button2.Parent = Frame
    local UICorner2 = Instance.new("UICorner", Button2)

    Button1.MouseButton1Click:Connect(function()
        Frame:Destroy()
        if config.OnButton1 then
            config.OnButton1()
        end
    end)

    Button2.MouseButton1Click:Connect(function()
        Frame:Destroy()
        if config.OnButton2 then
            config.OnButton2()
        end
    end)
end

return setmetatable({}, Popup)
