local WertUi = {}
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")

local Gui = Instance.new("ScreenGui")
Gui.Name = "WertUi"
Gui.Parent = CoreGui
Gui.IgnoreGuiInset = true
Gui.ResetOnSpawn = false

local Main = Instance.new("Frame")
Main.Name = "Main"
Main.Size = UDim2.new(0, 540, 0, 350)
Main.Position = UDim2.new(0.5, -270, 0.5, -175)
Main.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Main.BorderSizePixel = 0
Main.Active = true
Main.Draggable = true
Main.Parent = Gui

Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 5)

local Topbar = Instance.new("Frame")
Topbar.Name = "Topbar"
Topbar.Size = UDim2.new(1, 0, 0, 35)
Topbar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Topbar.Parent = Main
Instance.new("UICorner", Topbar).CornerRadius = UDim.new(0, 5)

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Text = "WertUi"
Title.Size = UDim2.new(1, -15, 1, 0)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Font = Enum.Font.GothamBold
Title.TextSize = 17
Title.Parent = Topbar

local TabHolder = Instance.new("Frame")
TabHolder.Name = "TabHolder"
TabHolder.Size = UDim2.new(0, 130, 1, -35)
TabHolder.Position = UDim2.new(0, 0, 0, 35)
TabHolder.BackgroundColor3 = Color3.fromRGB(32, 32, 32)
TabHolder.Parent = Main
Instance.new("UICorner", TabHolder).CornerRadius = UDim.new(0, 5)

local Layout = Instance.new("UIListLayout", TabHolder)
Layout.Padding = UDim.new(0, 4)
Layout.SortOrder = Enum.SortOrder.LayoutOrder

local Content = Instance.new("Frame")
Content.Name = "Content"
Content.Size = UDim2.new(1, -130, 1, -35)
Content.Position = UDim2.new(0, 130, 0, 35)
Content.BackgroundColor3 = Color3.fromRGB(38, 38, 38)
Content.ClipsDescendants = true
Content.Parent = Main
Instance.new("UICorner", Content).CornerRadius = UDim.new(0, 5)

local Tabs = {}

function WertUi:CreateWindow(info)
	Title.Text = info.Title or "WertUi"

	local Window = {}

	function Window:Tab(tab)
		local TabBtn = Instance.new("TextButton")
		TabBtn.Name = "Tab_" .. tab.Title
		TabBtn.Size = UDim2.new(1, -10, 0, 32)
		TabBtn.Position = UDim2.new(0, 5, 0, 0)
		TabBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
		TabBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
		TabBtn.Text = tab.Title or "Tab"
		TabBtn.Font = Enum.Font.GothamBold
		TabBtn.TextSize = 14
		TabBtn.Parent = TabHolder
		Instance.new("UICorner", TabBtn).CornerRadius = UDim.new(0, 5)

		local TabFrame = Instance.new("ScrollingFrame")
		TabFrame.Name = tab.Title
		TabFrame.Size = UDim2.new(1, 0, 1, 0)
		TabFrame.BackgroundTransparency = 1
		TabFrame.ScrollBarThickness = 3
		TabFrame.Visible = false
		TabFrame.Parent = Content

		local Inside = Instance.new("UIListLayout", TabFrame)
		Inside.Padding = UDim.new(0, 6)
		Inside.SortOrder = Enum.SortOrder.LayoutOrder

		local Padding = Instance.new("UIPadding", TabFrame)
		Padding.PaddingLeft = UDim.new(0, 6)
		Padding.PaddingTop = UDim.new(0, 6)

		Inside:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
			TabFrame.CanvasSize = UDim2.new(0, 0, 0, Inside.AbsoluteContentSize.Y + 15)
		end)

		local TabTable = {}

		function TabTable:Section(sec)
			local Section = Instance.new("TextLabel")
			Section.Size = UDim2.new(1, -10, 0, 28)
			Section.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
			Section.Text = sec.Title or "Section"
			Section.TextColor3 = Color3.fromRGB(255, 255, 255)
			Section.Font = Enum.Font.GothamBold
			Section.TextSize = sec.TextSize or 16
			Section.TextXAlignment = Enum.TextXAlignment[sec.TextXAlignment or "Left"]
			Section.Parent = TabFrame
			Instance.new("UICorner", Section).CornerRadius = UDim.new(0, 5)
			return Section
		end

		function TabTable:Button(btn)
			local Button = Instance.new("TextButton")
			Button.Size = UDim2.new(1, -10, 0, 30)
			Button.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
			Button.Text = btn.Title or "Button"
			Button.TextColor3 = Color3.fromRGB(255, 255, 255)
			Button.Font = Enum.Font.GothamSemibold
			Button.TextSize = 15
			Button.Parent = TabFrame
			Instance.new("UICorner", Button).CornerRadius = UDim.new(0, 5)
			Button.MouseButton1Click:Connect(function()
				pcall(btn.Callback)
			end)
			return Button
		end

		function TabTable:Toggle(tg)
			local Toggle = Instance.new("TextButton")
			Toggle.Size = UDim2.new(1, -10, 0, 30)
			Toggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
			Toggle.Text = tg.Title or "Toggle"
			Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
			Toggle.Font = Enum.Font.GothamSemibold
			Toggle.TextSize = 15
			Toggle.Parent = TabFrame
			Instance.new("UICorner", Toggle).CornerRadius = UDim.new(0, 5)
			local state = false
			Toggle.MouseButton1Click:Connect(function()
				state = not state
				TweenService:Create(Toggle, TweenInfo.new(0.15), {
					BackgroundColor3 = state and Color3.fromRGB(80, 150, 80) or Color3.fromRGB(60, 60, 60)
				}):Play()
				pcall(tg.Callback, state)
			end)
			return Toggle
		end

		function TabTable:Divider()
			local Line = Instance.new("Frame")
			Line.Size = UDim2.new(1, -12, 0, 1)
			Line.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
			Line.Parent = TabFrame
		end

		TabBtn.MouseButton1Click:Connect(function()
			for _, v in ipairs(Content:GetChildren()) do
				if v:IsA("ScrollingFrame") then
					v.Visible = false
				end
			end
			for _, b in ipairs(TabHolder:GetChildren()) do
				if b:IsA("TextButton") then
					TweenService:Create(b, TweenInfo.new(0.2), {
						BackgroundColor3 = Color3.fromRGB(40, 40, 40)
					}):Play()
				end
			end
			TabFrame.Visible = true
			TweenService:Create(TabBtn, TweenInfo.new(0.2), {
				BackgroundColor3 = Color3.fromRGB(70, 70, 70)
			}):Play()
		end)

		table.insert(Tabs, TabFrame)
		return TabTable
	end

	function Window:SelectTab(i)
		for a, v in ipairs(Tabs) do
			v.Visible = (a == i)
		end
	end

	return Window
end

UserInputService.InputBegan:Connect(function(i, g)
	if not g and i.KeyCode == Enum.KeyCode.RightControl then
		Gui.Enabled = not Gui.Enabled
	end
end)

return WertUi
