local WertUi = {}
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "WertUi"
ScreenGui.ResetOnSpawn = false
ScreenGui.IgnoreGuiInset = true
ScreenGui.Parent = CoreGui

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 500, 0, 320)
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -160)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

local Corner = Instance.new("UICorner", MainFrame)
Corner.CornerRadius = UDim.new(0, 13)

local TopBar = Instance.new("Frame")
TopBar.Size = UDim2.new(1, 0, 0, 35)
TopBar.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
TopBar.Parent = MainFrame
Instance.new("UICorner", TopBar).CornerRadius = UDim.new(0, 13)

local Title = Instance.new("TextLabel")
Title.Text = "WertUi"
Title.Size = UDim2.new(1, -10, 1, 0)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.Parent = TopBar

local TabHolder = Instance.new("Frame")
TabHolder.Size = UDim2.new(0, 130, 1, -35)
TabHolder.Position = UDim2.new(0, 0, 0, 35)
TabHolder.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
TabHolder.Parent = MainFrame

local Content = Instance.new("Frame")
Content.Size = UDim2.new(1, -130, 1, -35)
Content.Position = UDim2.new(0, 130, 0, 35)
Content.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Content.ClipsDescendants = true
Content.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout", TabHolder)
UIListLayout.Padding = UDim.new(0, 3)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

local Tabs = {}

function WertUi:CreateWindow(config)
    Title.Text = config.Title or "WertUi"
    Corner.CornerRadius = UDim.new(0, config.Corner or 13)

    local Window = {}
    function Window:Tab(info)
        local TabButton = Instance.new("TextButton")
        TabButton.Size = UDim2.new(1, -10, 0, 30)
        TabButton.Position = UDim2.new(0, 5, 0, 0)
        TabButton.Text = info.Title or "Tab"
        TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        TabButton.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
        TabButton.Font = Enum.Font.GothamBold
        TabButton.TextSize = 14
        TabButton.Parent = TabHolder
        local TabFrame = Instance.new("ScrollingFrame")
        TabFrame.Size = UDim2.new(1, 0, 1, 0)
        TabFrame.BackgroundTransparency = 1
        TabFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
        TabFrame.ScrollBarThickness = 3
        TabFrame.Visible = false
        TabFrame.Parent = Content
        local Layout = Instance.new("UIListLayout", TabFrame)
        Layout.Padding = UDim.new(0, 6)
        Layout.SortOrder = Enum.SortOrder.LayoutOrder

        Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            TabFrame.CanvasSize = UDim2.new(0, 0, 0, Layout.AbsoluteContentSize.Y + 10)
        end)

        local Tab = {}
        function Tab:Section(sec)
            local SectionFrame = Instance.new("Frame")
            SectionFrame.Size = UDim2.new(1, -10, 0, 30)
            SectionFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            SectionFrame.Parent = TabFrame
            local Corner = Instance.new("UICorner", SectionFrame)
            Corner.CornerRadius = UDim.new(0, 8)
            local Text = Instance.new("TextLabel")
            Text.Size = UDim2.new(1, -10, 1, 0)
            Text.Position = UDim2.new(0, 10, 0, 0)
            Text.BackgroundTransparency = 1
            Text.Text = sec.Title or "Section"
            Text.Font = Enum.Font.GothamBold
            Text.TextColor3 = Color3.fromRGB(255, 255, 255)
            Text.TextSize = sec.TextSize or 17
            Text.TextXAlignment = Enum.TextXAlignment[sec.TextXAlignment or "Left"]
            Text.Parent = SectionFrame
            return SectionFrame
        end

        function Tab:Button(btn)
            local Button = Instance.new("TextButton")
            Button.Size = UDim2.new(1, -10, 0, 30)
            Button.Position = UDim2.new(0, 5, 0, 0)
            Button.Text = btn.Title or "Button"
            Button.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            Button.TextColor3 = Color3.fromRGB(255, 255, 255)
            Button.Font = Enum.Font.GothamBold
            Button.TextSize = 15
            Button.Parent = TabFrame
            Instance.new("UICorner", Button).CornerRadius = UDim.new(0, 8)
            Button.MouseButton1Click:Connect(function()
                pcall(btn.Callback)
            end)
            return Button
        end

        function Tab:Toggle(tg)
            local Toggle = Instance.new("TextButton")
            Toggle.Size = UDim2.new(1, -10, 0, 30)
            Toggle.Position = UDim2.new(0, 5, 0, 0)
            Toggle.Text = tg.Title or "Toggle"
            Toggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
            Toggle.Font = Enum.Font.GothamBold
            Toggle.TextSize = 15
            Toggle.Parent = TabFrame
            Instance.new("UICorner", Toggle).CornerRadius = UDim.new(0, 8)
            local state = false
            Toggle.MouseButton1Click:Connect(function()
                state = not state
                TweenService:Create(Toggle, TweenInfo.new(0.2), {BackgroundColor3 = state and Color3.fromRGB(100, 180, 100) or Color3.fromRGB(60, 60, 60)}):Play()
                pcall(tg.Callback, state)
            end)
            return Toggle
        end

        function Tab:Divider()
            local Line = Instance.new("Frame")
            Line.Size = UDim2.new(1, -10, 0, 1)
            Line.Position = UDim2.new(0, 5, 0, 0)
            Line.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
            Line.Parent = TabFrame
        end

        TabButton.MouseButton1Click:Connect(function()
            for _, v in pairs(Content:GetChildren()) do
                if v:IsA("ScrollingFrame") then
                    v.Visible = false
                end
            end
            for _, b in pairs(TabHolder:GetChildren()) do
                if b:IsA("TextButton") then
                    TweenService:Create(b, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(35, 35, 35)}):Play()
                end
            end
            TabFrame.Visible = true
            TweenService:Create(TabButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(70, 70, 70)}):Play()
        end)
        table.insert(Tabs, TabFrame)
        return Tab
    end

    function Window:SelectTab(index)
        for i, tab in pairs(Tabs) do
            tab.Visible = (i == index)
        end
    end

    return Window
end

UserInputService.InputBegan:Connect(function(input, processed)
    if not processed and input.KeyCode == Enum.KeyCode.RightControl then
        ScreenGui.Enabled = not ScreenGui.Enabled
    end
end)

return WertUi
