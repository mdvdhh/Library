local EightUi = {}
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")

local function randomName(length)
	local chars = "QWERTYUIOPASDFGHJKLZXCVBNM123456789"
	local name = ""
	for i = 1, length do
		local rand = math.random(1, #chars)
		name = name .. string.sub(chars, rand, rand)
	end
	return name
end

local function getScale()
	local viewport = workspace.CurrentCamera.ViewportSize
	local width = viewport.X
	if width >= 1500 then
		return 1
	elseif width >= 900 then
		return 0.9
	else
		return 0.8
	end
end

function EightUi:Notify(config)
	local Title = config.Title or "Notification"
	local Description = config.Description or ""
	local Duration = config.Duration or 3
	local Icon = config.Icon or ""
	local Corner = config.Corner or 8
	local Position = config.Position or "TopRight"
	local Animation = config.Animation or "Slide"
	local scale = getScale()

	local ScreenGui = CoreGui:FindFirstChild("EightUiContainer") or Instance.new("ScreenGui")
	if not ScreenGui:IsDescendantOf(CoreGui) then
		ScreenGui.Name = randomName(8)
		ScreenGui.IgnoreGuiInset = true
		ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
		ScreenGui.Parent = CoreGui

		local Holder = Instance.new("Frame")
		Holder.Name = "EightUiContainer"
		Holder.BackgroundTransparency = 1
		Holder.Size = UDim2.new(1, 0, 1, 0)
		Holder.Parent = ScreenGui

		local Layout = Instance.new("UIListLayout", Holder)
		Layout.Padding = UDim.new(0, 10)
		Layout.HorizontalAlignment = Enum.HorizontalAlignment.Right
		Layout.VerticalAlignment = Enum.VerticalAlignment.Top
	end

	local Holder = ScreenGui:FindFirstChild("EightUiContainer")

	local NotifyFrame = Instance.new("Frame")
	NotifyFrame.Size = UDim2.fromOffset(280 * scale, 90 * scale)
	NotifyFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	NotifyFrame.BackgroundTransparency = 0.1
	NotifyFrame.BorderSizePixel = 0
	NotifyFrame.ClipsDescendants = true
	NotifyFrame.Parent = Holder

	local UICorner = Instance.new("UICorner", NotifyFrame)
	UICorner.CornerRadius = UDim.new(0, Corner * scale)

	if Icon ~= "" then
		local Image = Instance.new("ImageLabel")
		Image.Size = UDim2.fromOffset(50 * scale, 50 * scale)
		Image.Position = UDim2.fromOffset(15 * scale, 20 * scale)
		Image.BackgroundTransparency = 1
		Image.Image = Icon
		Image.Parent = NotifyFrame
	end

	local TitleLabel = Instance.new("TextLabel")
	TitleLabel.Text = Title
	TitleLabel.Font = Enum.Font.GothamBold
	TitleLabel.TextColor3 = Color3.new(1, 1, 1)
	TitleLabel.TextSize = 16 * scale
	TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
	TitleLabel.BackgroundTransparency = 1
	TitleLabel.Position = UDim2.fromOffset(Icon ~= "" and 75 * scale or 15 * scale, 15 * scale)
	TitleLabel.Size = UDim2.new(1, -90 * scale, 0, 20 * scale)
	TitleLabel.Parent = NotifyFrame

	local DescLabel = Instance.new("TextLabel")
	DescLabel.Text = Description
	DescLabel.Font = Enum.Font.Gotham
	DescLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
	DescLabel.TextSize = 14 * scale
	DescLabel.TextXAlignment = Enum.TextXAlignment.Left
	DescLabel.TextWrapped = true
	DescLabel.BackgroundTransparency = 1
	DescLabel.Position = UDim2.fromOffset(Icon ~= "" and 75 * scale or 15 * scale, 40 * scale)
	DescLabel.Size = UDim2.new(1, -90 * scale, 0, 40 * scale)
	DescLabel.Parent = NotifyFrame

	if Animation == "Slide" then
		NotifyFrame.Position = UDim2.new(1, 320 * scale, 0, 0)
		TweenService:Create(NotifyFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
			Position = UDim2.new(0, 0, 0, 0)
		}):Play()
	elseif Animation == "Fade" then
		NotifyFrame.BackgroundTransparency = 1
		for _, obj in pairs(NotifyFrame:GetDescendants()) do
			if obj:IsA("TextLabel") then obj.TextTransparency = 1 end
			if obj:IsA("ImageLabel") then obj.ImageTransparency = 1 end
		end
		TweenService:Create(NotifyFrame, TweenInfo.new(0.4), {BackgroundTransparency = 0.1}):Play()
		for _, obj in pairs(NotifyFrame:GetDescendants()) do
			TweenService:Create(obj, TweenInfo.new(0.4), {TextTransparency = 0, ImageTransparency = 0}):Play()
		end
	end

	task.delay(Duration, function()
		if Animation == "Slide" then
			TweenService:Create(NotifyFrame, TweenInfo.new(0.4), {
				Position = UDim2.new(1, 320 * scale, 0, 0)
			}):Play()
		elseif Animation == "Fade" then
			TweenService:Create(NotifyFrame, TweenInfo.new(0.4), {BackgroundTransparency = 1}):Play()
			for _, obj in pairs(NotifyFrame:GetDescendants()) do
				TweenService:Create(obj, TweenInfo.new(0.4), {TextTransparency = 1, ImageTransparency = 1}):Play()
			end
		end
		task.wait(0.5)
		ScreenGui:Destroy()
	end)
end

return EightUi
